{{ $site := .Site }}
<!-- Begnning of Metadata -->
<head>
<!-- Page Info -->
{{ $pageTitle := title (replace .Title "_" " ") }}
{{ if ne .Section "articles"}}
	{{ if isset .Params "notitle" }}
		<title>{{ .Title }} | Solus</title>
		<meta property="og:title" content="{{ .Title }} | Solus" />
	{{ else }}
		<title>{{ $pageTitle }} | Solus</title>
		<meta property="og:title" content="{{ $pageTitle }} | Solus" />
	{{ end }}
{{ else }}
	<title>{{ $pageTitle }} | Solus Help Center</title>
	<meta property="og:title" content="{{ $pageTitle }} | Solus Help Center" />
{{ end }}
<!-- Beginning of Author Info -->
{{ if isset .Params "author" }}
	{{ $author := index .Site.Data.users .Params.author }}
	<meta name="author" content="{{ $author.Name }}" />
	{{ $splitName := (split $author.Name " ") }}
	<meta property="og:profile:first_name" content="{{ index $splitName 0 }}"/>
	<meta property="og:profile:gender" content="{{ $author.Gender }}" />
	<meta property="og:profile:last_name" content="{{ index $splitName 1 }}"/>
	<meta property="og:profile:username" content="{{ .Params.author }}"/>
{{ end }}
<!-- End of Author Info -->
<!-- Beginning of Featured Image -->
{{ if and (isset .Params "featuredimage") (ne .Params.featuredimage "") }}
	{{ $imagePath := printf "imgs/posts/%s" .Params.featuredimage }}
	{{ $staticPath := printf "static/%s" $imagePath }}
	{{ $imageInfo := imageConfig $staticPath }}
	<meta property="og:image" content="{{ .Site.BaseURL }}{{ $imagePath }}" />
	<meta property="og:image:height" content="{{ $imageInfo.Height }}px" />
	<meta property="og:image:width" content="{{ $imageInfo.Width }}px" />
{{ end }}
<!-- End of Featured Image -->
<meta property="og:link" content="{{ .Permalink }}" />
<!-- End of Page Info -->

<!-- Beginning of Blog Post Specific Content (Requires Summary) -->
{{ if isset . "Summary" }}
	<!-- Beginning of Description -->
	{{ $plainSummary := substr (.page.Summary | plainify) 0 140 }}
	<meta name="description" content="{{ $plainSummary }}" />
	<meta property="og:description" content="{{ $plainSummary }}" />
	<!-- End of Description -->
{{ end }}
<!-- End of Blog Post Specific Content -->

{{ if isset . "Lastmod" }}
	<meta name="article:modified_time" content="{{ .Lastmod }}" />
{{ end }}

{{ if isset . "PublishedDate" }}
	<meta name="article:published_time" content="{{ .PublishedDate }}" />
{{ end }}

{{ $generalMetaTags := "solus, linux, operating system, budgie, mate" }}
{{ $metaCompliantPageTitle :=  delimit (split (lower $pageTitle) " ") ", " }}

{{ if or (eq .Section "articles") (eq .Section "help-center") }}
	<meta name="keywords" content="ask solus, asksolus, help center, wiki, {{ $generalMetaTags }}, {{ $metaCompliantPageTitle }}" />
	<script type="text/javascript" src="{{ .Site.BaseURL}}js/highlight.min.js"></script>
{{ else if and (eq .Section "blog") (hasPrefix .URL "/blog/") }}
	{{ $blogPosts := .Paginator.Pages }}
	{{ $firstBlog := (index $blogPosts 0) }}
	<link rel="prefetch" href="{{ absURL $firstBlog.URL }}" />
{{ else }}
	<meta name="keywords" content="{{ $generalMetaTags }}, {{ $metaCompliantPageTitle }}" />
{{ end }}

<!-- Site Info -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="google-site-verification" content="wHXuSW2s5SdffnXtwLzkLEVsfH8_XK7kE75_i5VjmLM" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=1,user-scalable=no" />
<meta property="og:site_name" content="Solus" />
<meta property="og:locale" content="{{ .Site.Language.Lang }}" />
{{ range readDir ("themes/solus/static/css") }}
	{{ if and (hasPrefix .Name "website") (in .Name ".css") }}
		<link rel="stylesheet" href="{{ $site.BaseURL }}css/{{ .Name }}" />
	{{ end }}
{{ end }}

<link rel="icon" href="{{ .Site.BaseURL}}imgs/favicon.ico" />
<link rel="sitemap" href="{{ .Site.BaseURL}}sitemap.xml" />
{{ range readDir ("themes/solus/static/js") }}
	{{ if and (or (hasPrefix .Name "site") (hasPrefix .Name "solbit")) (in .Name ".min.js") }}
		<script type="text/javascript" src="{{ $site.BaseURL}}js/{{ .Name }}"></script>
	{{ end }}
{{ end }}
{{ .Hugo.Generator }}
{{ if .RSSLink }}
<link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
<link href="{{ .RSSLink }}" rel="feed" type="application/rss+xml" title="{{ .Site.Title }}" />
{{ end }}
<!-- End of Site Info -->
</head>
<!-- End of Metadata -->
