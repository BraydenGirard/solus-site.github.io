{{ $blog := .blog }}
{{ $site := .site }}

{{ if isset $blog.Params "author" }}
	{{ $author := (index $site.Data.users $blog.Params.author) }}

	{{ if isset $blog.Params "categories" }}
		<!-- Beginning of Post Info -->
		<div data-solus-component="post-info">
			<h1><a href="{{ $blog.Permalink }}">{{ replace (title $blog.Title) "'S" "'s" }}</a></h1>
			<span>{{ $author.Name }} / {{ $author.Role }}</span>
			<b>{{ dateFormat "January 2, 2006" $blog.Date }}
				{{ $categoriesLength := len $blog.Params.categories }}
				{{- if ne $categoriesLength 0 }}
					in
					{{ $firstCategory := index (first 1 $blog.Params.categories) 0 }}
					<a href="{{ $site.BaseURL }}categories/{{ $firstCategory }}">{{- if eq (lower $firstCategory) "twis"}}TWIS{{ else }}{{ humanize $firstCategory }}{{ end -}}</a>
					{{- if gt $categoriesLength 2 }},{{end -}}
					{{ if gt $categoriesLength 1 }}
						{{ $followupCategories := first (sub $categoriesLength 1) (after 1 $blog.Params.categories) }}
						{{ $lastCategory := index (last 1 $blog.Params.categories) 0 }}

						{{- if ne (index $followupCategories 0) $lastCategory }}
							{{ range $category := $followupCategories }}
								<a href="{{ $site.BaseURL }}categories/{{ $category }}">{{ if eq (lower $category) "twis"}}TWIS{{ else }}{{ humanize $category }}{{ end }}</a>,
							{{ end }}
						{{ end }}

						and <a href="{{ $site.BaseURL }}categories/{{ $lastCategory }}">{{ if eq (lower $lastCategory) "twis"}}TWIS{{ else }}{{ humanize $lastCategory }}{{ end }}</a>
					{{ end -}}
				{{ end -}}
			</b>
		</div>
		<!-- End of Post Info -->
	{{ end }}
{{ end }}
